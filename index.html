<!DOCTYPE html>
<html>
<head>
    <title>Dnyanvani 90.4FM Interactive Flipbook</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.1/turn.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }

        #flipbook {
            width: 90vw;
            height: 70vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }

        .page {
            background: white !important;
            display: flex !important;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .page img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            image-rendering: -webkit-optimize-contrast;
        }

        .dnyanvani-header {
            position: absolute;
            top: 20px;
            text-align: center;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="dnyanvani-header">
        <h1>Dnyanvani 90.4FM Community Radio</h1>
        <h3>ज्ञानवाणी - जनतेचे रेडिओ</h3>
    </div>

    <div id="flipbook">
        <!-- Pages will be added dynamically -->
    </div>

    <script>
    $(function() {
        // Calculate responsive size
        const calculateSize = () => {
            const width = Math.min(window.innerWidth * 0.9, 1200);
            const height = width * 0.7;
            return { width, height };
        };

        // Initialize flipbook
        const initFlipbook = () => {
            const { width, height } = calculateSize();
            
            $('#flipbook').turn({
                width: width,
                height: height,
                display: 'double',
                acceleration: true,
                gradients: true,
                elevation: 50,
                autoCenter: true,
                pages: 32, // 30 pages + 2 covers
                when: {
                    missing: function(e, pages) {
                        pages.forEach(page => {
                            const img = page === 1 ? 'front.png' :
                                      page === 32 ? 'back.png' : 
                                      `${page-1}.png`;
                            
                            this.addPage(
                                `<div class="page">
                                    <img src="${img}" alt="Page ${page}">
                                </div>`, 
                                page
                            );
                        });
                    },
                    turned: function(e, page) {
                        if(page < 2) this.turn('page', 2);
                        if(page > 31) this.turn('page', 31);
                    }
                }
            });
        };

        // Initial setup
        initFlipbook();

        // Responsive resize
        $(window).resize(function() {
            const { width, height } = calculateSize();
            $('#flipbook').turn('size', width, height);
        });

        // Keyboard navigation
        $(document).keydown(function(e) {
            if(e.keyCode === 37) $('#flipbook').turn('previous');
            if(e.keyCode === 39) $('#flipbook').turn('next');
        });

        // Touch support
        if($.isTouch) {
            $('#flipbook').on('touchstart', function(e) {
                e.preventDefault();
                const touch = e.originalEvent.touches[0];
                const x = touch.pageX;
                const w = $(this).width()/2;
                
                if(x > w) $(this).turn('next');
                else $(this).turn('previous');
            });
        }
    });
    </script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.1/turn.min.js"></script>
    <style>
        /* Essential Styles */
        #canvas {
            position: absolute;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        
        .sj-book {
            width: 1000px !important;
            height: 700px !important;
            margin: 50px auto;
        }

        .hard {
            background: #1a2b3c !important;
            background-size: contain !important;
            background-repeat: no-repeat !important;
            background-position: center !important;
        }

        .page-content {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .page-content img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .dnyanvani-header {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: white;
            z-index: 1000;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>

<div class="dnyanvani-header">
    <h1>Dnyanvani 90.4FM Community Radio</h1>
    <h3>ज्ञानवाणी - जनतेचे रेडिओ</h3>
</div>

<div id="canvas">
    <div id="book-zoom">
        <div class="sj-book">
            <!-- Front Covers -->
            <div class="hard"></div>
            <div class="hard"></div>
            
            <!-- Dynamic Pages Will Be Inserted Here -->
            
            <!-- Back Covers -->
            <div class="hard"></div>
            <div class="hard"></div>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
    const totalPages = 32; // 30 content + 2 covers

    $('.sj-book').turn({
        width: 1000,
        height: 700,
        elevation: 50,
        acceleration: true,
        autoCenter: true,
        display: 'double',
        gradients: true,
        duration: 1000,
        pages: totalPages,
        when: {
            missing: function(e, pages) {
                pages.forEach(page => {
                    const img = page === 1 ? 'front.png' :
                              page === totalPages ? 'back.png' :
                              `${page-1}.png`;
                    
                    this.addPage(
                        `<div class="page-content">
                            <img src="${img}" alt="Page ${page-1}">
                        </div>`,
                        page
                    );
                });
            },
            turned: function(e, page) {
                // Prevent flipping past covers
                if(page < 2) this.turn('page', 2);
                if(page > totalPages-1) this.turn('page', totalPages-1);
            }
        }
    });

    // Keyboard navigation
    $(document).on('keydown', function(e) {
        if(e.keyCode === 37) $('.sj-book').turn('previous');
        if(e.keyCode === 39) $('.sj-book').turn('next');
    });

    // Touch support
    if($.isTouch) {
        $('.sj-book').on('touchend', function(e) {
            const touch = e.originalEvent.changedTouches[0];
            const x = touch.pageX;
            const w = $(this).width()/2;
            if(x > w) $(this).turn('next');
            else $(this).turn('previous');
        });
    }
});
</script>

</body>
</html>
